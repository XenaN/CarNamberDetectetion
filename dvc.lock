schema: '2.0'
stages:
  create_list_files:
    cmd: python scripts/cli.py lists --input custom-dataset
    deps:
    - path: custom-dataset/images/test/
      md5: 30ef360bb17d83a1b7ff29b6b28f4e65.dir
      size: 166060067
      nfiles: 261
    - path: scripts/cli.py
      md5: 11373d8cdf44bd3dcde93b831f3f934e
      size: 1131
    outs:
    - path: custom-dataset/test.txt
      md5: 13bd9c18464172d96558c19dde201f9c
      size: 20094
    - path: custom-dataset/train.txt
      md5: c6fa3a49eff71a442dedcad5d69506e1
      size: 706016
    - path: custom-dataset/val.txt
      md5: d9075351bda27cf109a6b2571744fb28
      size: 151970
  create_annotations:
    cmd: python scripts/cli.py ann --input autoriaNumberplateDataset-2022-08-01 --output
      custom-dataset
    deps:
    - path: autoriaNumberplateDataset-2022-08-01/
      md5: 01259450ea51fb9f0ef1b9dde3cb61e4.dir
      size: 7204614029
      nfiles: 11310
    - path: scripts/cli.py
      md5: 11373d8cdf44bd3dcde93b831f3f934e
      size: 1131
    outs:
    - path: custom-dataset/images/train/
      md5: 3f3a0cc7ba3748b1c1f9db996fef678e.dir
      size: 5777750696
      nfiles: 9044
    - path: custom-dataset/images/val/
      md5: 3c5da70248ea6632de7a3beb690a91b2.dir
      size: 1419845132
      nfiles: 2261
    - path: custom-dataset/labels/train/
      md5: c4af40866ae648a4fc84eab4bee81248.dir
      size: 364040
      nfiles: 9044
    - path: custom-dataset/labels/val/
      md5: cf1f008bc67ae91bc2b69b0d3067aadf.dir
      size: 90934
      nfiles: 2261
  create_test_dataset:
    cmd: python scripts/cli.py dataset --input custom-dataset
    deps:
    - path: custom-dataset/images/train/
      md5: 3f3a0cc7ba3748b1c1f9db996fef678e.dir
      size: 5777750696
      nfiles: 9044
    - path: custom-dataset/images/val/
      md5: f0fa74a5b1bdf0d3faf04df974ad4881.dir
      size: 1253785065
      nfiles: 2000
    - path: custom-dataset/labels/train/
      md5: c4af40866ae648a4fc84eab4bee81248.dir
      size: 364040
      nfiles: 9044
    - path: custom-dataset/labels/val/
      md5: 9cff72f19d5575b2d76708296fa92e98.dir
      size: 80636
      nfiles: 2000
    - path: scripts/cli.py
      md5: 11373d8cdf44bd3dcde93b831f3f934e
      size: 1131
    outs:
    - path: custom-dataset/images/test/
      md5: 30ef360bb17d83a1b7ff29b6b28f4e65.dir
      size: 166060067
      nfiles: 261
    - path: custom-dataset/labels/test/
      md5: 5940b3a2de2af2e1b5277604197e957e.dir
      size: 10298
      nfiles: 261
  create_config:
    cmd: python scripts/cli.py conf --input custom-dataset --output yolov7/data/custom.yaml
    deps:
    - path: custom-dataset/train.txt
      md5: c6fa3a49eff71a442dedcad5d69506e1
      size: 706016
    - path: scripts/cli.py
      md5: 11373d8cdf44bd3dcde93b831f3f934e
      size: 1131
    outs:
    - path: yolov7/data/custom.yaml
      md5: bfafbc78e39a1efe3522256bc8f9356e
      size: 202
  test:
    cmd: cd yolov7 && python test.py --device 0 --batch-size 6 --data data/custom.yaml
      --img 640 --weights best.pt --name yolov7-custom --conf 0.001 --iou 0.65
    deps:
    - path: yolov7/best.pt
      md5: b6bf8021245bfe8fcf4bc1560a0b8c34
      size: 74780041
    - path: yolov7/runs/train/
      md5: ad6dbe83b80210ecf7cb709c6f8389d8.dir
      size: 151118805
      nfiles: 14
    outs:
    - path: yolov7/runs/test/
      md5: 804c82d79b41eaa7caff0c03929187c6.dir
      size: 1035933
      nfiles: 11
